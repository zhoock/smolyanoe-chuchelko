# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

## üéâ –°—Ç–∞—Ç—É—Å

–ú–∏–≥—Ä–∞—Ü–∏—è `001_create_payment_settings.sql` —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `user_payment_settings` —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –í—Å–µ –∫–æ–ª–æ–Ω–∫–∏ —Å–æ–∑–¥–∞–Ω—ã (9 –∫–æ–ª–æ–Ω–æ–∫)
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã (5 –∏–Ω–¥–µ–∫—Å–æ–≤)
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### DATABASE_URL

```
postgresql://postgres.jhpvetvfnsklpwswadle:[PASSWORD]@aws-1-ap-south-1.pooler.supabase.com:5432/postgres
```

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `[PASSWORD]` –Ω–∞ –≤–∞—à –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### ENCRYPTION_KEY

```
MLjc/tUOfSm/J6aQFzuDYP6EE2Ij6r/AVRjD+C+D1lk=
```

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Netlify Dashboard

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://app.netlify.com/projects/smolyanoechuchelko
2. Project configuration ‚Üí Environment variables
3. –û–±–Ω–æ–≤–∏—Ç–µ `DATABASE_URL`:
   - Production ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Å –ø–∞—Ä–æ–ª–µ–º)
   - Local development ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ
4. –û–±–Ω–æ–≤–∏—Ç–µ `ENCRYPTION_KEY`:
   - Production ‚Üí `MLjc/tUOfSm/J6aQFzuDYP6EE2Ij6r/AVRjD+C+D1lk=`
   - Local development ‚Üí —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ
5. –ù–∞–∂–º–∏—Ç–µ Save
6. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

–¢–∞–±–ª–∏—Ü–∞ `user_payment_settings` —Å–æ–¥–µ—Ä–∂–∏—Ç:

- `id` (UUID) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `user_id` (VARCHAR) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `provider` (VARCHAR) - –ø—Ä–æ–≤–∞–π–¥–µ—Ä (yookassa, stripe, paypal)
- `shop_id` (VARCHAR) - ID –º–∞–≥–∞–∑–∏–Ω–∞
- `secret_key_encrypted` (TEXT) - –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
- `is_active` (BOOLEAN) - –∞–∫—Ç–∏–≤–Ω–∞ –ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- `created_at` (TIMESTAMP) - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` (TIMESTAMP) - –¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `last_used_at` (TIMESTAMP) - –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è:

- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ÆKassa –∏ –¥—Ä—É–≥–∏–º–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
